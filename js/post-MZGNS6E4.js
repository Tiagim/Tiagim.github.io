import{b as ie,e as re,f as se,g as K,h as U,i as J,l as ce}from"./chunk-3FPHNOEV.js";import{A as fe,D as $,E as I,F as ge,G as z,H as Y,I as ne,J as _,M as D,N as he,P as h,U as we,a as Q,c as ue,j as m,k as de,l as ee,p as ve,s as te,t as pe,v as O,w as me,x as W}from"./chunk-GJBKILEV.js";import{a as le,g as G}from"./chunk-4Y5ULZV4.js";import"./chunk-P53UEG3X.js";import{a as H}from"./chunk-X3E5KYLA.js";import"./chunk-WIQECBEN.js";H();H();H();function ye(o,e){let t=e[0]-o[0],n=e[1]-o[1];return Math.hypot(t,n)}function ze(o){let e=0;if(o){let n=o;for(;n&&n!==document.body;){let a=window.getComputedStyle(n).zIndex;if(a!=="auto"&&a!==""){let i=Number.parseInt(a,10);Number.isNaN(i)||(e=Math.max(e,i))}n=n.parentElement}}let t=document.querySelectorAll("*");for(let n of t){let a=window.getComputedStyle(n).zIndex;if(a!=="auto"&&a!==""){let i=Number.parseInt(a,10);Number.isNaN(i)||(e=Math.max(e,i))}}return Math.max(e+1,9999)}function He(o){if(!o)return!1;let e=o;for(;e&&e!==document.body;){let t=window.getComputedStyle(e),n=e.classList;if(t.position==="fixed"||n.contains("el-dialog")||n.contains("ant-modal")||n.contains("modal")||n.contains("dialog")||e.hasAttribute("role")&&(e.getAttribute("role")==="dialog"||e.getAttribute("role")==="modal"))return!0;e=e.parentElement}return!1}function De(o){let e=o.parentElement;for(;e&&e!==document.body&&e!==document.documentElement;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.parentElement}return!1}function Be(o,e,t){let n=o.getBoundingClientRect();return De(o)?{top:n.top,left:n.left}:{top:n.top+t,left:n.left+e}}function be(o){if(!o.value)return[0,0];let e=window.getComputedStyle(o.value).transform;if(e==="none")return[0,0];let t=e.match(/matrix\((.+)\)/);if(!t)return[0,0];let n=t[1].split(", ");return[Number.parseFloat(n[4])||0,Number.parseFloat(n[5])||0]}function R(o){typeof o>"u"||typeof o.preventDefault!="function"||o.preventDefault()}function Ze(o,e){Object.assign(o.style,e)}function Oe(o){let{imgRef:e,props:t}=o,n=m(t.previewZIndex),a=m(!1),i=h(()=>t.autoZIndex?n.value:t.previewZIndex),p=()=>{if(!(!t.autoZIndex||!e.value))if(a.value=He(e.value),a.value){let s=ze(e.value);n.value=Math.max(s,t.previewZIndex)}else n.value=t.previewZIndex};return I(e,()=>{p()},{immediate:!0}),I(()=>[t.autoZIndex,t.previewZIndex],()=>{p()}),{finalZIndex:i,isInModal:a,updateZIndex:p}}function $e(o,e,t){var n=t||{},a=n.noTrailing,i=a===void 0?!1:a,p=n.noLeading,s=p===void 0?!1:p,y=n.debounceMode,r=y===void 0?void 0:y,u,d=!1,f=0;function w(){u&&clearTimeout(u)}function T(k){var E=k||{},g=E.upcomingOnly,q=g===void 0?!1:g;w(),d=!q}function A(){for(var k=arguments.length,E=new Array(k),g=0;g<k;g++)E[g]=arguments[g];var q=this,b=Date.now()-f;if(d)return;function S(){f=Date.now(),e.apply(q,E)}function M(){u=void 0}!s&&r&&!u&&S(),w(),r===void 0&&b>o?s?(f=Date.now(),i||(u=setTimeout(r?M:S,o))):S():i!==!0&&(u=setTimeout(r?M:S,r===void 0?o-b:o))}return A.cancel=T,A}function Ye(o,e={}){let t=m(null),n=null,a=()=>{if(!o.value)return;let s=o.value.getBoundingClientRect();t.value=s,e.onChange?.(s)},i=e.throttle?$e(e.throttleDelay??100,a,{noTrailing:!1}):a,p=()=>{n?.disconnect(),n=null,window.removeEventListener("resize",i)};return O(()=>{if(o.value&&(a(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(i),n.observe(o.value)),window.addEventListener("resize",i),o.value.tagName==="IMG")){let s=o.value;s.complete||s.addEventListener("load",a,{once:!0})}}),W(p),$(()=>{if(p(),!!o.value){if(a(),typeof ResizeObserver<"u"&&(n=new ResizeObserver(i),n.observe(o.value)),window.addEventListener("resize",i),o.value.tagName==="IMG"){let s=o.value;s.complete||s.addEventListener("load",a,{once:!0})}ve(p)}}),{rect:t}}function Xe(o){let{handleWheel:e,handleTouchStart:t,handleKeyDown:n}=o;function a(i){if(!(typeof window>"u"))switch(i){case"on":window.addEventListener("wheel",R,{passive:!1}),window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("wheel",e),window.addEventListener("touchstart",t),window.addEventListener("keydown",n);break;case"off":window.removeEventListener("wheel",R),window.removeEventListener("touchmove",R),window.removeEventListener("wheel",e),window.removeEventListener("touchstart",t),window.removeEventListener("keydown",n);break}}return{toggleEventListener:a}}function We(o,e){let{zoomStep:t,zoomMax:n,zoomMin:a,dblClickZoomTo:i}=e,p=m(!1),s=m(0),y=m(0),r=m(1),u=0,d=0,f=0,w=0,T=0;$(()=>{o.value&&(o.value.style.cursor=p.value?"grabbing":"grab")});let A=h(()=>{let c=s.value===0?"-50%":`${s.value}px`,v=y.value===0?"-50%":`${y.value}px`;return`translate(${c}, ${v}) scale(${r.value})`}),k=()=>{o.value&&Ze(o.value,{transform:A.value})},E=(c=0,v)=>{v!==void 0?r.value=v:r.value+=c,r.value=Math.max(a,Math.min(n,r.value)),k()},g=c=>{E(c.deltaY<0?t:-t)},q=()=>{E(0,r.value>1?1:i)},b=c=>{if(o.value){if(c.touches.length===2){let[v,L]=[c.touches[0],c.touches[1]],C=ye([v.pageX,v.pageY],[L.pageX,L.pageY]),P=C/u;E(0,r.value*P),u=C}else if(c.touches.length===1){let v=c.touches[0],L=v.pageX-d,C=v.pageY-f;s.value=w+L,y.value=T+C,k()}}},S=()=>{document.removeEventListener("touchmove",b),document.removeEventListener("touchend",S)},M=c=>{if(o.value){if(c.touches.length===2){let[v,L]=[c.touches[0],c.touches[1]];u=ye([v.pageX,v.pageY],[L.pageX,L.pageY])}else if(c.touches.length===1){let v=c.touches[0];d=v.pageX,f=v.pageY;let L=be(o);w=L[0],T=L[1]}document.addEventListener("touchmove",b),document.addEventListener("touchend",S)}},B=c=>{if(!o.value)return;let v=c.clientX-d,L=c.clientY-f;s.value=w+v,y.value=T+L,k()},Z=()=>{p.value=!1,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",Z)},j=c=>{if(!o.value)return;p.value=!0,d=c.clientX,f=c.clientY;let v=be(o);w=v[0],T=v[1],document.addEventListener("mousemove",B),document.addEventListener("mouseup",Z)},X=()=>{s.value=0,y.value=0,r.value=1},N=()=>{document.removeEventListener("wheel",g),document.removeEventListener("touchstart",M),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",S),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",Z)};return W(N),{handleWheel:g,handleTouchStart:M,handleDblclick:q,handleMouseDown:j,initTransformer:X,cleanupListeners:N}}function _e(){let o=m(typeof window<"u"?window.innerWidth:0),e=m(typeof window<"u"?window.innerHeight:0),t=m(typeof window<"u"?window.scrollX:0),n=m(typeof window<"u"?window.scrollY:0),a=()=>{typeof window>"u"||(o.value=window.innerWidth,e.value=window.innerHeight)},i=()=>{typeof window>"u"||(t.value=window.scrollX||window.pageXOffset,n.value=window.scrollY||window.pageYOffset)};return O(()=>{a(),i(),window.addEventListener("resize",a,{passive:!0}),window.addEventListener("scroll",i,{passive:!0})}),W(()=>{typeof window>"u"||(window.removeEventListener("resize",a),window.removeEventListener("scroll",i))}),{width:o,height:e,scrollX:t,scrollY:n}}var x={duration:500,maskBgColor:"black",maskOpacity:.1,previewZIndex:9999,autoZIndex:!0,previewMaxWidth:"80vw",previewMaxHeight:"80vh",zoomStep:.2,zoomMin:.2,zoomMax:10,dblClickZoom:!0,dblClickZoomTo:2},Re={displaying:{type:Boolean,default:void 0},applyingPreviewStyles:{type:Boolean,default:void 0},isAnimating:{type:Boolean,default:void 0},src:{type:String,required:!0},alt:String,width:[String,Number],height:[String,Number],duration:{type:Number,default:x.duration},maskBgColor:{type:String,default:x.maskBgColor},maskOpacity:{type:Number,default:x.maskOpacity},previewZIndex:{type:Number,default:x.previewZIndex},autoZIndex:{type:Boolean,default:x.autoZIndex},previewMaxWidth:{type:[String,Number],default:x.previewMaxWidth},previewMaxHeight:{type:[String,Number],default:x.previewMaxHeight},zoomStep:{type:Number,default:x.zoomStep},zoomMin:{type:Number,default:x.zoomMin},zoomMax:{type:Number,default:x.zoomMax},dblClickZoom:{type:Boolean,default:x.dblClickZoom},dblClickZoomTo:{type:Number,default:x.dblClickZoomTo}},je={"update:displaying":o=>!0,"update:applyingPreviewStyles":o=>!0,"update:isAnimating":o=>!0,displayChange:o=>!0,previewStylesChange:o=>!0,animatingChange:o=>!0},Pe=["src"],Ve={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem"}},Fe=["src","alt"],Ge={key:0,style:{"font-size":"0.8rem",color:"#666"}},Ee=pe({name:"HanaImgViewer",__name:"HanaImgViewer",props:Re,emits:je,setup(o,{emit:e}){let t=o,n=e,a=m(!1);O(()=>{a.value=!0});let i=m(null),p=m(null),s=m(null),y=m(!1),r=m(!1),u=m(!1),d=h({get:()=>t.displaying!==void 0?t.displaying:y.value,set:l=>{t.displaying!==void 0?n("update:displaying",l):y.value=l,n("displayChange",l)}}),f=h({get:()=>t.applyingPreviewStyles!==void 0?t.applyingPreviewStyles:r.value,set:l=>{t.applyingPreviewStyles!==void 0?n("update:applyingPreviewStyles",l):r.value=l,n("previewStylesChange",l)}}),w=h({get:()=>t.isAnimating!==void 0?t.isAnimating:u.value,set:l=>{t.isAnimating!==void 0?n("update:isAnimating",l):u.value=l,n("animatingChange",l)}});I(()=>t.displaying,l=>{l!==void 0&&l!==y.value&&(y.value=l)}),I(()=>t.applyingPreviewStyles,l=>{l!==void 0&&l!==r.value&&(r.value=l)}),I(()=>t.isAnimating,l=>{l!==void 0&&l!==u.value&&(u.value=l)});function T(){w.value=!0,setTimeout(()=>{w.value=!1},t.duration)}let A=m(0),k=h(()=>({width:(typeof t.width=="number"?`${t.width}px`:t.width)??"fit-content",height:(typeof t.height=="number"?`${t.height}px`:t.height)??"fit-content",visibility:d.value?"hidden":"visible"}));function E(){w.value||(d.value||A.value++,T(),d.value?(f.value=!1,setTimeout(()=>{d.value=!1},t.duration)):d.value=!0)}let g=de(null);O(()=>{g.value=We(s,t)}),me(()=>{g.value?.cleanupListeners()});let q=m({}),{rect:b}=Ye(i,{throttle:!0,throttleDelay:100}),{finalZIndex:S}=Oe({imgRef:i,props:t}),M=h(()=>b.value?b.value.width/b.value.height:0),{width:B,height:Z,scrollX:j,scrollY:X}=_e(),N=h(()=>B.value/Z.value),c=h(()=>`${t.duration}ms`),v=h(()=>b.value&&M.value>N.value?`${b.value.width}px`:"auto"),L=h(()=>b.value?M.value>N.value?"auto":`${b.value.height}px`:"auto");function C(){return i.value?Be(i.value,j.value,X.value):{top:0,left:0}}let P=h(()=>(A.value,`${C().top}px`)),Se=h(()=>(A.value,`${C().left}px`)),ke=h(()=>M.value>N.value?`${t.previewMaxWidth}`:"auto"),Me=h(()=>M.value>N.value?"auto":`${t.previewMaxHeight}`),qe=h(()=>`calc(50vh + ${X.value}px)`);function Te(l){l.key==="Escape"&&d.value&&E()}let V=m({toggleEventListener:l=>{}});$(()=>{g.value&&(V.value=Xe({handleWheel:g.value.handleWheel,handleTouchStart:g.value.handleTouchStart,handleKeyDown:Te}))});let Ae=h(()=>({opacity:f.value?t.maskOpacity:0})),Ne=h(()=>({transition:w.value?`all ${c.value}`:"none",width:f.value?ke.value:v.value,height:f.value?Me.value:L.value,top:f.value?qe.value:P.value,left:f.value?"50%":Se.value,transform:f.value?"translate(-50%, -50%)":"none"}));return $(()=>{g.value?.initTransformer(),d.value?(typeof document<"u"&&(document.body.style.overflow="hidden"),requestAnimationFrame(()=>{f.value=!0})):typeof document<"u"&&(document.body.style.overflow="auto")}),I([d,w],([l,F],[oe,ae])=>{if(!g.value)return;let Ce=l&&!F&&oe&&ae&&f.value,Ie=l&&F&&oe&&!ae;Ce&&(q.value={dblclick:g.value.handleDblclick,mousedown:g.value.handleMouseDown},V.value.toggleEventListener("on")),Ie&&(V.value.toggleEventListener("off"),q.value={})}),(l,F)=>(z(),Y(ge,null,[a.value?(z(),ne(te,{key:0,to:"body"},[d.value?(z(),Y("div",{key:0,ref_key:"maskRef",ref:p,style:Q({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:l.maskBgColor,zIndex:ee(S)-1,transition:`all ${c.value}`,opacity:Ae.value.opacity}),onClick:E},null,4)):D("",!0)])):D("",!0),a.value?(z(),ne(te,{key:1,to:"body"},[d.value?(z(),Y("img",he({key:0,ref_key:"previewerRef",ref:s,src:l.src,draggable:"false",style:{position:"absolute",objectFit:"cover",cursor:"grab",zIndex:ee(S),...Ne.value}},fe(q.value,!0)),null,16,Pe)):D("",!0)])):D("",!0),_("div",Ve,[_("div",{style:Q(k.value)},[_("img",{ref_key:"imgRef",ref:i,src:l.src,alt:l.alt,style:{width:"100%",height:"100%","object-fit":"cover",cursor:"pointer"},onClick:E},null,8,Fe)],4),l.alt?(z(),Y("span",Ge,ue(l.alt),1)):D("",!0)])],64))}});var xe=o=>{document.querySelectorAll(`${o} .md img:not(.emoji):not(.vemoji)`).forEach(e=>{let t=e,n=t.src,a=document.createElement("div");t.replaceWith(a),we(Ee,{src:n,maskOpacity:.8}).mount(a)})};var st=()=>{if(!document.querySelector(".md"))return;xe(".post.block"),document.querySelector(".post.block").oncopy=e=>{if(J(LOCAL.copyright),LOCAL.nocopy){e.preventDefault();return}let t=document.getElementById("copyright");if(window.getSelection().toString().length>le.experiments.copyrightLength&&t){e.preventDefault();let n="# "+t.querySelector(".author").innerText,a="# "+t.querySelector(".link").innerText,i="# "+t.querySelector(".license").innerText,p=n+"<br>"+a+"<br>"+i+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),s=n+`
`+a+`
`+i+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(e.clipboardData)e.clipboardData.setData("text/html",p),e.clipboardData.setData("text/plain",s);else throw new Error("Clipboard API not supported")}},document.querySelectorAll("li ruby").forEach(e=>{let t=e.parentNode;e.parentNode.tagName!=="LI"&&(t=e.parentNode.parentNode),t.classList.add("ruby")}),document.querySelectorAll("ol[start]").forEach(e=>{e.style.counterReset="counter "+parseInt(e.getAttribute("start")-1)}),document.querySelectorAll(".md table").forEach(e=>{ie(e,{className:"table-container"})}),document.querySelectorAll(".highlight > .table-container").forEach(e=>{e.className="code-container"}),document.querySelectorAll("figure.highlight").forEach(e=>{let t=e.querySelector(".code-container"),n=e.querySelector("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');let a=e.querySelector(".copy-btn");LOCAL.nocopy?a.remove():(a.addEventListener("click",r=>{let u=r.currentTarget,d="",f="";t.querySelectorAll("pre").forEach(w=>{f+=d+w.innerText,d=`
`}),ce(f,w=>{u.querySelector(".ic").className=w?"ic i-check":"ic i-times",u.blur(),J(LOCAL.copyright)})},{passive:!0}),a.addEventListener("mouseleave",r=>{setTimeout(()=>{r.target.querySelector(".ic").className="ic i-clipboard"},1e3)})),e.querySelector(".breakline-btn").addEventListener("click",r=>{let u=r.currentTarget;e.classList.contains("breakline")?(e.classList.remove("breakline"),u.querySelector(".ic").className="ic i-align-left"):(e.classList.add("breakline"),u.querySelector(".ic").className="ic i-align-justify")});let p=e.querySelector(".fullscreen-btn"),s=()=>{e.classList.remove("fullscreen"),e.scrollTop=0,G.classList.remove("fullscreen"),p.querySelector(".ic").className="ic i-expand"},y=()=>{if(e.classList.contains("fullscreen")){if(s(),t&&t.querySelectorAll("tr").length>15){let r=t.querySelector(".show-btn");t.style.maxHeight="300px",r.classList.remove("open")}U(e)}else if(e.classList.add("fullscreen"),G.classList.add("fullscreen"),p.querySelector(".ic").className="ic i-compress",t&&t.querySelectorAll("tr").length>15){let r=t.querySelector(".show-btn");t.style.maxHeight="",r.classList.add("open")}};if(p.addEventListener("click",y),n&&n.addEventListener("click",y),t&&t.querySelectorAll("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');let r=t.querySelector(".show-btn"),u=()=>{t.style.maxHeight="300px",r.classList.remove("open")},d=()=>{t.style.maxHeight="",r.classList.add("open")};r.addEventListener("click",()=>{r.classList.contains("open")?(s(),u(),U(t)):d()})}}),document.querySelectorAll("pre.mermaid > svg").forEach(e=>{let t=e;t.style.maxWidth=""}),document.querySelectorAll(".reward button").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let n=document.getElementById("qr");re(n)==="inline-flex"?K(n,0):K(n,1,()=>{se(n,"inline-flex")})})}),document.querySelectorAll(".quiz > ul.options li").forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("correct")?(e.classList.toggle("right"),e.parentNode.parentNode.classList.add("show")):e.classList.toggle("wrong")})}),document.querySelectorAll(".quiz > p").forEach(e=>{e.addEventListener("click",()=>{e.parentNode.classList.toggle("show")})}),document.querySelectorAll(".quiz > p:first-child").forEach(e=>{let t=e.parentNode,n="choice";(t.classList.contains("true")||t.classList.contains("false"))&&(n="true_false"),t.classList.contains("multi")&&(n="multiple"),t.classList.contains("fill")&&(n="gap_fill"),t.classList.contains("essay")&&(n="essay"),e.setAttribute("data-type",LOCAL.quiz[n])}),document.querySelectorAll(".quiz .mistake").forEach(e=>{e.setAttribute("data-type",LOCAL.quiz.mistake)}),document.querySelectorAll("div.tags a").forEach(e=>{e.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]});let o=document.querySelectorAll(".show-btn .i-angle-down");if(o.length){let e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting?o.forEach(a=>{a.classList.remove("stop-animation")}):o.forEach(a=>{a.classList.add("stop-animation")})})},{root:null,threshold:.5});o.forEach(t=>{e.observe(t)})}};export{st as postBeauty};
